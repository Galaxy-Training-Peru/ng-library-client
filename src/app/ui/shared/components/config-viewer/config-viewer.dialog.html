<h2 mat-dialog-title>
  <mat-icon>settings</mat-icon>
  Runtime Configuration
</h2>

<mat-dialog-content>
  <section>
    <h3>Environment</h3>
    <dl class="kv">
      <dt>Mode</dt>
      <dd>
        <mat-chip-set>
          <mat-chip [highlighted]="!env.production">
            {{ env.production ? 'Production' : 'Development' }}
          </mat-chip>
        </mat-chip-set>
      </dd>
      <dt>Config file</dt>
      <dd>{{ env.configFile }}</dd>
    </dl>
  </section>

  <mat-divider />

  <section>
    <h3>Loaded Configuration</h3>

    @if (config(); as cfg) {
      @for (entry of flatEntries; track entry.key; let last = $last) {
        @if (entry.children) {
          <h4>{{ entry.key }}</h4>
          <dl class="kv">
            @for (child of entry.children; track child.key) {
              <dt>{{ child.key }}</dt>
              <dd>{{ child.value }}</dd>
            }
          </dl>
        } @else {
          <dl class="kv">
            <dt>{{ entry.key }}</dt>
            <dd>{{ entry.value }}</dd>
          </dl>
        }
        @if (!last) { <mat-divider /> }
      }
    } @else {
      <p>No configuration loaded</p>
    }
  </section>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Close</button>
</mat-dialog-actions>
