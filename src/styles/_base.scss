// Base styles
@use '../theme/themes.scss' as themes;

* {
  box-sizing: border-box;
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: var(--lib-font-family);
}

body {
  @include themes.light-themes();

  &.dark-theme {
    @include themes.dark-themes();
  }
}

// CSS Variables
:root {
  // Font
  --lib-font-family: Roboto, 'Helvetica Neue', sans-serif;
  --lib-font-weight-medium: 500;
  --lib-font-weight-bold: 700;

  // Spacing scale (4px base unit)
  --lib-space-xxs:  2px;
  --lib-space-xs:   4px;
  --lib-space-sm:   6px;
  --lib-space-1:    8px;
  --lib-space-md:  12px;
  --lib-space-2:   16px;
  --lib-space-3:   24px;
  --lib-space-4:   32px;
  --lib-space-xxl: 48px;

  // Angular Material form-field subscript reserved height (default spacing baseline for form fields)
  --lib-form-subscript: 1.25rem;

  // Component sizes
  --lib-badge-size: 20px;
  --lib-icon-sm:   18px;
  // Default list container offset (toolbar + card padding + filters + paginator).
  // Override per-component via :host { --list-offset: Xpx }
  --lib-list-offset: calc(var(--lib-toolbar-height) + 168px);

  // Breakpoints
  --lib-max-w-sm:  640px;
  --lib-max-w-md:  768px;
  --lib-max-w-lg: 1024px;
  --lib-max-w-xl: 1280px;
  --lib-container-max-width: 1200px;

  // Radii (M3 corner scale)
  --lib-radius-xs:  4px;
  --lib-radius-sm:  8px;
  --lib-radius:    12px;
  --lib-radius-lg: 16px;
  --lib-radius-xl: 28px;
  --lib-radius-full: 9999px;
  --lib-icon-height: 24px;
  --lib-icon-width: 24px;
  --lib-icon-font-size: 24px;
  --lib-toolbar-height: 64px;
  --lib-gap: 20px;

  --mat-expansion-header-collapsed-state-height: 96px;
  --mat-expansion-header-expanded-state-height: 96px;

  --mat-toolbar-standard-height: 64px;
  --mat-toolbar-mobile-height: 64px;
}

// Theme-dependent variables (require Material tokens from body)
body {
  --lib-divider-soft: color-mix(in oklab, var(--mat-sys-outline-variant) 18%, var(--mat-sys-surface));
  --lib-divider-medium: color-mix(in oklab, var(--mat-sys-outline-variant) 26%, var(--mat-sys-surface));

  --lib-card-bg: var(--mat-sys-surface);

  --lib-table-header-bg: var(--mat-sys-primary, var(--md-sys-color-primary));
  --lib-table-header-fg: var(--mat-sys-on-primary, var(--md-sys-color-on-primary));
}

// Material Design Overrides
// Disabled form fields used for read-only display â€” text renders in active color
.mdc-text-field--disabled .mdc-text-field__input,
.mdc-text-field--disabled .mdc-floating-label,
.mat-form-field-disabled .mat-mdc-form-field-icon-prefix mat-icon,
.mat-form-field-disabled .mat-mdc-form-field-icon-suffix mat-icon,
.mat-mdc-select-disabled {
  color: var(--mat-sys-on-surface) !important;
  -webkit-text-fill-color: var(--mat-sys-on-surface) !important;
  opacity: 1 !important;
}

table[mat-table] th.mat-mdc-header-cell,
.mat-mdc-table th.mat-mdc-header-cell {
  background-color: var(--lib-table-header-bg);
  color: var(--lib-table-header-fg);
}

th.mat-mdc-header-cell .mat-sort-header-arrow {
  color: var(--lib-table-header-fg);
}

th.mat-mdc-header-cell.mat-sort-header-sorted .mat-sort-header-arrow,
th.mat-mdc-header-cell .mat-sort-header-container:hover .mat-sort-header-arrow {
  opacity: 1;
}

// Table row striping and hover
.mat-mdc-table .mat-mdc-row:nth-child(even) {
  background-color: color-mix(in oklab, var(--mat-sys-surface-container-low) 60%, var(--mat-sys-surface));
}

.mat-mdc-table .mat-mdc-row:hover {
  background-color: color-mix(in oklab, var(--mat-sys-primary) 8%, var(--mat-sys-surface));
}

// Table cell vertical alignment
.mat-mdc-table .mat-mdc-cell {
  vertical-align: middle;
}

// Paginator styling
.mat-mdc-paginator {
  --mat-paginator-container-background-color: transparent;
}

// Paginator border only when preceded by a table container
.list-table-container ~ .mat-mdc-paginator {
  border-top: 1px solid var(--mat-sys-outline-variant);
}

@media (max-width: 600px) and (orientation: portrait) {
  .list-table-container ~ .mat-mdc-paginator {
    border-top: none;
  }
}

.mat-mdc-menu-item.is-active:visited,
.mat-mdc-menu-item.is-active {
  background: var(--mat-sys-surface-container-highest);
  // color: var(--mat-sys-on-surface-container-highest);
}

// Toolbar and table primary overrides
mat-toolbar {
  height: var(--lib-toolbar-height) !important;
  min-height: var(--lib-toolbar-height) !important;
}

mat-toolbar.mat-primary,
mat-table.mat-primary {
  --mat-toolbar-container-background-color: var(--mat-sys-primary);
  --mat-toolbar-container-text-color: var(--mat-sys-on-primary);
  background-color: var(--mat-toolbar-container-background-color);
  color: var(--mat-toolbar-container-text-color);
}

// Icon sizing in toolbar and cards
mat-toolbar,
mat-card {
  .mat-mdc-button-base mat-icon {
    width: var(--lib-icon-width);
    height: var(--lib-icon-height);
    font-size: var(--lib-icon-font-size);
    line-height: var(--lib-icon-height);
  }
}

// Toolbar icon colors
mat-toolbar {
  .mat-mdc-icon-button .mdc-button__label,
  .mat-mdc-icon-button .mat-icon {
    color: var(--mat-sys-on-primary);
  }
}

// Toolbar button hover effects
mat-toolbar .mat-mdc-icon-button:hover,
mat-toolbar .mat-mdc-button:hover {
  background-color: color-mix(in oklab, var(--mat-sys-surface) 18%, transparent);
}

h6 {
  font: var(--mat-sys-title-large);
}

p {
  margin: 0;
  font: var(--mat-sys-body-large);
  color: var(--mat-sys-on-surface-variant);
}

a {
  color: var(--mat-sys-primary);
  text-decoration: none;

  &:hover {
    text-decoration: underline;
  }
}

button {
  font-family: inherit;
}

// Angular Material: align outline field text vertically to match fill fields.
.mdc-text-field--outlined .mat-mdc-form-field-infix,
.mdc-text-field--no-label .mat-mdc-form-field-infix {
  padding-top: 20px !important;
}
