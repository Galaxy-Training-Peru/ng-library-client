// ==========================================================================
// List Page Layout
// Reusable layout for any list page with table + accordion + paginator.
//
// Structure:
//   .list-container              -> flex column wrapper
//     .list-filters              -> filter bar (grid)
//     .list-table-container      -> scrollable table wrapper
//     .list-accordion-container  -> mobile card/accordion wrapper
//     mat-paginator              -> pagination
//
// Desktop: table visible, accordion hidden
// Mobile portrait: table hidden, accordion visible
// ==========================================================================

// --- Layout container ---
.list-container {
  display: flex;
  flex-direction: column;
  height: fit-content;
  max-height: calc(100vh - var(--list-offset, 232px));
  position: relative;

  @supports not (height: fit-content) {
    height: auto;
  }

  .list-table-container {
    flex: 1 1 auto;
    min-height: 0;
    overflow: auto;
  }

  mat-paginator {
    flex: 0 0 auto;
  }
}

// --- Filters ---
.list-filters {
  display: grid;
  grid-template-columns: 1fr;

  mat-form-field {
    width: 100%;
  }
}

// --- Row actions ---
.actions-cell .row-actions {
  display: inline-flex;
}

// --- Desktop: show table, hide accordion ---
.list-table-container {
  display: block;
}

.list-accordion-container {
  display: none;
  margin-bottom: var(--lib-gap, 16px);
}

// --- Mobile portrait: hide table, show accordion ---
@media (max-width: 600px) and (orientation: portrait) {
  .list-table-container {
    display: none;
  }

  .list-accordion-container {
    display: block;
  }

  .list-accordion {
    .mat-expansion-panel-header-description {
      justify-content: space-between;
      align-items: center;
    }

    .panel-actions {
      display: flex;
      align-items: center;
      width: 100%;
    }

    .panel-actions .spacer {
      flex: 1;
    }
  }

  .field {
    margin-bottom: var(--lib-gap, 16px);
  }

  .mobile-icon {
    vertical-align: middle;
  }
}

// --- Responsive: tablet / landscape ---
@media (hover: none) and (pointer: coarse), (max-width: 899px), (max-height: 599px) {
  .list-container {
    display: block;
    height: auto;
    max-height: none;
  }

  .list-table-container {
    overflow: visible;
    min-height: auto;
  }

  mat-paginator {
    position: static;
  }

  .list-filters {
    grid-template-columns: 1fr;
  }
}
